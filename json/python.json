{"sections":[{"title":"Fonctions courantes du module os","items":[{"title":"Lister les fichiers dans un répertoire","commands":[{"label":"Pour obtenir la liste des fichiers et des dossiers dans un répertoire, utilisez la fonction [strong]listdir()[/strong]. Cela retourne une liste contenant les noms des entrées.","code":["fichiers = os.listdir('/chemin/vers/le/répertoire')","# Affiche la liste des fichiers et dossiers","print(fichiers)"]}]},{"title":"Obtenir le nom du système d'exploitation","commands":[{"label":"Pour connaître le nom du système d'exploitation sur lequel votre script python s'exécute, utilisez la variable name. Cela peut être utile pour adapter votre code à différents environnements.","code":["# Affiche 'posix', 'nt', etc.","print(os.name)"]}]},{"title":"Créer un nouveau répertoire","commands":[{"label":"Pour créer un nouveau répertoire, utilisez la fonction [strong]mkdir()[/strong]. Cette fonction lève une erreur si le répertoire existe déjà.","code":["# Crée un répertoire nommé 'nouveau_répertoire'","os.mkdir('nouveau_répertoire')"]}]},{"title":"Supprimer un fichier","commands":[{"label":"Pour supprimer un fichier, utilisez la fonction [strong]remove()[/strong]. Assurez-vous que le fichier existe pour éviter les erreurs.","code":["# Supprime le fichier nommé 'fichier.txt'","os.remove('fichier.txt')"]}]},{"title":"Vérifier si un chemin existe","commands":[{"label":"Pour vérifier si un chemin (fichier ou répertoire) existe, utilisez la fonction [strong]path.exists()[/strong]. Cela retourne True si le chemin existe, sinon False.","code":["if os.path.exists('/chemin/vers/le/fichier.txt'):","    print(\"Le fichier existe.\")","else:","    print(\"Le fichier n'existe pas.\")"]}]},{"title":"Obtenir le répertoire de travail actuel","commands":[{"label":"Pour obtenir le répertoire de travail actuel, utilisez la fonction [strong]getcwd()[/strong]. Cela peut être utile pour savoir où vous vous trouvez dans le système de fichiers.","code":["current_directory = os.getcwd()","","# Affiche le répertoire de travail actuel","print(current_directory)"]}]},{"title":"Créer plusieurs niveaux de répertoires","commands":[{"label":"Pour créer plusieurs niveaux de répertoires en une seule commande, utilisez [strong]makedirs()[/strong]. Cela crée tous les répertoires intermédiaires nécessaires.","code":["# Crée tous les niveaux de répertoires","os.makedirs('/chemin/vers/le/nouveau/répertoire')"]}]},{"title":"Renommer un fichier ou un répertoire","commands":[{"label":"Pour renommer un fichier ou un répertoire, utilisez la fonction [strong]rename()[/strong]. Assurez-vous que le fichier source existe pour éviter les erreurs.","code":["# Renomme 'ancien_nom.txt' en 'nouveau_nom.txt'","os.rename('ancien_nom.txt', 'nouveau_nom.txt')"]}]}]},{"title":"Fonctions courantes du module shutil","items":[{"title":"Copier un fichier","commands":[{"label":"Pour copier un fichier d'un emplacement à un autre, utilisez la fonction [strong]copy()[/strong]. Cela copie le contenu du fichier source vers le fichier de destination.","code":["# Copie 'source.txt' vers 'destination.txt'","shutil.copy('source.txt', 'destination.txt')"]}]},{"title":"Copier un fichier avec métadonnées","commands":[{"label":"Pour copier un fichier tout en préservant ses métadonnées (comme les permissions), utilisez [strong]copy2()[/strong].","code":["# Copie avec métadonnées","shutil.copy2('source.txt', 'destination.txt')"]}]},{"title":"Copier un répertoire","commands":[{"label":"Pour copier un répertoire entier, utilisez la fonction [strong]copytree()[/strong]. Le répertoire de destination ne doit pas exister avant l'opération.","code":["# Copie 'source_directory' vers 'destination_directory'","shutil.copytree('source_directory', 'destination_directory')"]}]},{"title":"Déplacer un fichier ou un répertoire","commands":[{"label":"Pour déplacer un fichier ou un répertoire, utilisez la fonction [strong]move()[/strong]. Cela copie le contenu à l'emplacement de destination et supprime l'original.","code":["# Déplace 'source.txt' vers 'new_location'","shutil.move('source.txt', 'new_location/source.txt')"]}]},{"title":"Supprimer un répertoire non vide","commands":[{"label":"Pour supprimer un répertoire ainsi que tout son contenu, utilisez la fonction [strong]rmtree()[/strong].","code":["# Supprime 'directory_to_remove' et son contenu","shutil.rmtree('directory_to_remove')"]}]},{"title":"Renommer un fichier ou un répertoire","commands":[{"label":"Pour renommer un fichier ou un répertoire, vous pouvez utiliser la fonction [strong]move()[/strong] en spécifiant le nouveau nom comme destination.","code":["# Renomme 'old_name.txt' en 'new_name.txt'","shutil.move('old_name.txt', 'new_name.txt')"]}]},{"title":"Vérifier si un fichier existe dans le PATH","commands":[{"label":"Pour trouver le chemin d'un exécutable dans le système, utilisez la fonction [strong]which()[/strong].","code":["# Trouve le chemin de l'exécutable Python","path_to_python = shutil.which('python')","","# Affiche le chemin trouvé","print(path_to_python)"]}]}]},{"title":"Fonctions courantes du module json","items":[{"title":"Sérialiser des données Python en JSON","commands":[{"label":"Pour convertir un objet Python (comme un dictionnaire) en chaîne JSON, utilisez la fonction [strong]dumps()[/strong]. Cela vous permet de manipuler la chaîne JSON dans votre code.","code":["data = {'nom': 'John', 'age': 30}","json_string = json.dumps(data)","# Affiche '{\"nom\": \"John\", \"age\": 30}'","print(json_string)"]}]},{"title":"Écrire des données JSON dans un fichier","commands":[{"label":"Pour écrire des données JSON dans un fichier, utilisez la fonction [strong]dump()[/strong]. Cela sérialise l'objet et l'écrit directement dans le fichier spécifié.","code":["with open('data.json', 'w') as json_file:","    # Écrit le dictionnaire dans 'data.json'","    json.dump(data, json_file)"]}]},{"title":"Désérialiser des données JSON en Python","commands":[{"label":"Pour convertir une chaîne JSON en objet Python, utilisez la fonction [strong]loads()[/strong]. Cela vous permet d'accéder aux données sous forme de dictionnaire ou de liste.","code":["json_string = '{\"nom\": \"John\", \"age\": 30}'","data = json.loads(json_string)","# Affiche 'John'","print(data['nom'])"]}]},{"title":"Lire des données JSON à partir d'un fichier","commands":[{"label":"Pour lire des données JSON à partir d'un fichier, utilisez la fonction [strong]load()[/strong]. Cela désérialise le contenu du fichier et le convertit en objet Python.","code":["with open('data.json', 'r') as json_file:","    # Lit et désérialise les données du fichier","    data = json.load(json_file)"]}]},{"title":"Gérer les indentations dans le JSON","commands":[{"label":"Pour rendre le fichier JSON plus lisible, vous pouvez utiliser l'argument indent lors de l'écriture. Cela permet d'ajouter des sauts de ligne et des espaces pour une meilleure présentation.","code":["with open('pretty_data.json', 'w') as json_file:","    # Écrit avec une indentation de 4 espaces","    json.dump(data, json_file, indent=4)"]},{"label":"Syntaxe de json.dump()","code":["json.dump(obj, fp, skipkeys=False, ensure_ascii=True, check_circular=True,","          allow_nan=True, cls=None, indent=None, separators=None,","          default=None, sort_keys=False)"]},{"label":["Paramètres principaux","- [strong]obj[/strong] : L'objet Python à sérialiser (par exemple, dictionnaire, liste).","- [strong]fp[/strong] : Un objet fichier où le JSON sera écrit. Ce fichier doit être ouvert en mode écriture ('w').","Options de personnalisation","- [strong]skipkeys[/strong] : Si True, les clés qui ne sont pas des types de base (str, int, float, bool, None) seront ignorées au lieu de lever une erreur.","- [strong]ensure_ascii[/strong] : Si True (valeur par défaut), tous les caractères non-ASCII seront échappés. Si False, ces caractères seront écrits tels quels. Cela est utile pour conserver les caractères spéciaux dans les langues non anglaises."],"code":["# Écrit les caractères non-ASCII tels quels","json.dump(data, file, ensure_ascii=False)"]},{"label":["- [strong]check_circular[/strong] : Si True (valeur par défaut), vérifie les références circulaires dans l'objet à sérialiser et lève une erreur si elles sont trouvées.","- [strong]allow_nan[/strong] : Si True (valeur par défaut), permet la sérialisation des valeurs NaN et Infinity. Si False, cela lèvera une erreur si de telles valeurs sont rencontrées.","- [strong]cls[/strong] : Permet de spécifier un encodeur JSON personnalisé en passant une sous-classe de json.JSONEncoder.","- [strong]indent[/strong] : Permet d'ajouter une indentation pour rendre le JSON plus lisible. Par exemple, indent=4 ajoutera quatre espaces d'indentation."],"code":["# Indentation pour la lisibilité","json.dump(data, file, indent=4)"]},{"label":"- [strong]separators[/strong] : Un tuple qui spécifie comment séparer les éléments et les paires clé-valeur. Par défaut, il est défini sur (',', ': '). Pour réduire la taille du fichier JSON, vous pouvez utiliser :","code":["# Supprime l'espace après le séparateur","json.dump(data, file, separators=(',', ':'))"]},{"label":["- [strong]default[/strong] : Une fonction qui sera appelée pour les objets non sérialisables. Cela permet de définir comment traiter des types spécifiques d'objets.","- [strong]sort_keys[/strong] : Si True, les clés du dictionnaire seront triées dans l'ordre alphabétique lors de la sérialisation."]}]},{"title":"Exemple d'utilisation","commands":[{"label":"Voici un exemple complet utilisant plusieurs de ces paramètres :","code":["import json","","data = {","    'nom': 'John',","    'age': 30,","    'ville': 'Paris',","    'langues': ['français', 'anglais'],","    'caractères spéciaux': 'éèêë'","}","","with open('data.json', 'w', encoding='utf-8') as file:","    json.dump(data, file, ensure_ascii=False, indent=4,","              separators=(',', ': '))"]},{"label":["Dans cet exemple :","- Les caractères spéciaux sont écrits tels quels grâce à [italics]ensure_ascii=False[/italics].","- L'indentation est définie à 4 espaces pour améliorer la lisibilité.","- Les séparateurs sont spécifiés pour réduire l'espace entre les éléments."]}]},{"title":"Gestion des erreurs","commands":[{"label":"Lors de la désérialisation avec json.load(), vous pouvez gérer les erreurs en utilisant un bloc try-except :","code":["try:","    with open('data.json', 'r') as json_file:","        data = json.load(json_file)","except json.JSONDecodeError:","    raise json.JSONDecodeError(f\"Le fichier '{json_file}' n'est pas un JSON valide.\")"]}]}]}]}